### 问题来源
在做一个金融项目的搜索功能时，有这么一个需 求：
1、调用系统**数字键盘**;
2、输入实时检验,非法字符禁止输入；
### 分析
原本以为只是将`input`的`type=number`即可，可实际发现并没有想象中那么简单:
1、设置成`type=number`只是将系统键盘默认切换到数字类型，并不能达到禁用其他字符的效果;
2、一旦输入的内容组合出来是非数字类型，那么绑定的值将变成空字符串，因为DOM引擎认为这不是一个合法的数字，这样一来也没法进行校验

### 解决思路
1、动态修改`input`的`type`:
  在聚焦时候，设置延迟,将`type=number`修改为`type='text'`，这样一来，就可以正确的获取到任何输入的字符串结果(切换类型的时候，系统键盘不会变化!这点很重要很关键);
  ```js{4}
    onFocus() {
      setTimeout(()=>{

        this.inputType = 'text'
      },300)
    },
    onInput() {
      // 根据正则匹配当前的字符
    }
  ```
  此法不建议使用，`ios`下正常，`andriod`下键盘会切换;
2、监听按键事件:
   我们都知道对于`input`输入来说，`keyPress`这些按键事件是要比`input`提前触发,因此可以在按键时进行拦截:
   ```js{4}
    onKeyPress(ev){
      const charCode = ev;
      if(charCode<48 || charCode >57) {
        // 不符项拦截
        ev.preventDefault()
      }
    }
   ```
   ::: warning
   突然发现一个问题，如果输入内容直接从联想提示中输入，这样是无法监听到按键事件的。。因此最完美的做法还是使用一个自定义键盘。
   :::
   3、使用`DOM`属性`[validity](https://developer.mozilla.org/en-US/docs/Web/API/ValidityState)`对象;
   `badInput`如果为`true`说明当前输入非法，此时，我们可以手动调整值为上次的数值
   
